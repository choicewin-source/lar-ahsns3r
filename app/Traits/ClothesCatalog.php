<?php

namespace App\Traits;

trait ClothesCatalog
{
    private function normalizeClothesText(?string $text): string
    {
        if (!$text) {
            return '';
        }
        
        $text = trim($text);
        $text = preg_replace('/\s+/', ' ', $text);
        $text = str_replace(['أ', 'إ', 'آ'], 'ا', $text);
        
        return $text;
    }

    protected function getClothesSpecifications(): array
    {
        return [
            'ملابس رجالية' => [
                'قميص S صيفي',
                'قميص M صيفي',
                'قميص L صيفي',
                'قميص XL صيفي',
                'قميص XXL صيفي',
                'قميص S شتوي',
                'قميص M شتوي',
                'قميص L شتوي',
                'قميص XL شتوي',
                'قميص XXL شتوي',
                'بنطال S صيفي',
                'بنطال M صيفي',
                'بنطال L صيفي',
                'بنطال XL صيفي',
                'بنطال XXL صيفي',
                'بنطال S شتوي',
                'بنطال M شتوي',
                'بنطال L شتوي',
                'بنطال XL شتوي',
                'بنطال XXL شتوي',
                'جاكيت S شتوي',
                'جاكيت M شتوي',
                'جاكيت L شتوي',
                'جاكيت XL شتوي',
                'جاكيت XXL شتوي',
            ],
            'ملابس نسائية' => [
                'فستان S صيفي',
                'فستان M صيفي',
                'فستان L صيفي',
                'فستان XL صيفي',
                'فستان XXL صيفي',
                'فستان S شتوي',
                'فستان M شتوي',
                'فستان L شتوي',
                'فستان XL شتوي',
                'فستان XXL شتوي',
                'بلوزة S صيفي',
                'بلوزة M صيفي',
                'بلوزة L صيفي',
                'بلوزة XL صيفي',
                'بلوزة XXL صيفي',
                'بلوزة S شتوي',
                'بلوزة M شتوي',
                'بلوزة L شتوي',
                'بلوزة XL شتوي',
                'بلوزة XXL شتوي',
                'بنطال S صيفي',
                'بنطال M صيفي',
                'بنطال L صيفي',
                'بنطال XL صيفي',
                'بنطال XXL صيفي',
                'بنطال S شتوي',
                'بنطال M شتوي',
                'بنطال L شتوي',
                'بنطال XL شتوي',
                'بنطال XXL شتوي',
            ],
            'ملابس أطفال' => [
                'سنة واحدة صيفي',
                'سنتين صيفي',
                '3 سنوات صيفي',
                '4 سنوات صيفي',
                '5 سنوات صيفي',
                '6 سنوات صيفي',
                '7 سنوات صيفي',
                '8 سنوات صيفي',
                'سنة واحدة شتوي',
                'سنتين شتوي',
                '3 سنوات شتوي',
                '4 سنوات شتوي',
                '5 سنوات شتوي',
                '6 سنوات شتوي',
                '7 سنوات شتوي',
                '8 سنوات شتوي',
            ],
            'أحذية' => [
                'مقاس 36 رياضي',
                'مقاس 37 رياضي',
                'مقاس 38 رياضي',
                'مقاس 39 رياضي',
                'مقاس 40 رياضي',
                'مقاس 41 رياضي',
                'مقاس 42 رياضي',
                'مقاس 43 رياضي',
                'مقاس 44 رياضي',
                'مقاس 45 رياضي',
                'مقاس 36 رسمي',
                'مقاس 37 رسمي',
                'مقاس 38 رسمي',
                'مقاس 39 رسمي',
                'مقاس 40 رسمي',
                'مقاس 41 رسمي',
                'مقاس 42 رسمي',
                'مقاس 43 رسمي',
                'مقاس 44 رسمي',
                'مقاس 45 رسمي',
                'مقاس 36 نسائي',
                'مقاس 37 نسائي',
                'مقاس 38 نسائي',
                'مقاس 39 نسائي',
                'مقاس 40 نسائي',
                'مقاس 20 أطفال',
                'مقاس 21 أطفال',
                'مقاس 22 أطفال',
                'مقاس 23 أطفال',
                'مقاس 24 أطفال',
                'مقاس 25 أطفال',
                'مقاس 26 أطفال',
                'مقاس 27 أطفال',
                'مقاس 28 أطفال',
                'مقاس 29 أطفال',
                'مقاس 30 أطفال',
            ],
        ];
    }

    public function getClothesSpecsForSubCategory(?string $subCategory): array
    {
        if (empty($subCategory)) {
            return [];
        }

        $subCategory = $this->normalizeClothesText($subCategory);
        $catalog = $this->getClothesSpecifications();

        if (isset($catalog[$subCategory])) {
            return $catalog[$subCategory];
        }

        foreach ($catalog as $key => $specs) {
            if ($this->normalizeClothesText($key) === $subCategory) {
                return $specs;
            }
        }

        return [];
    }
}